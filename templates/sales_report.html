{% extends 'base.html' %} {% load static %}
<link rel="stylesheet" href="{% static 'css/ingredients.css' %}"> {% block content %}
<div id="starting">
   <div class="container">
      <div class="row">
         <h1>Sales Report
         </h1>
         <div class="form-inline my-2 ml-2 mr-2 my-lg-0">
                        <button class="btn btn-success" data-toggle="modal" data-target="#updatePLModal" v-on:click.prevent="getProductLines()">Select Product Lines</button>
                  </div>
         <div class="form-inline my-2 ml-2 mr-2 my-lg-0">
            Select Customer:   
            <select id="customers"> 
              <option value="all">all</option>
              <option value="saab">Saab</option>
              <option value="opel">Opel</option>
              <option value="audi">Audi</option>
            </select>
                        <!-- <button class="btn btn-success" data-toggle="modal" data-target="#updatePLModal" v-on:click.prevent="getProductLines()">Select Product Lines</button> -->
                  </div>
         <table class="table">
            <thead>
               <!-- write a forloop for productline here using div -->
               <tr>
                  <th colspan="100%" style="text-align:center;">Productline</th>>
               </tr>
               <!-- write a forloop for productline here using div -->
               <tr>
                  <th colspan="100%" style="text-align:center;">Sku Name and SKU ID</th>>
               </tr>
               <tr>
                  <th>Year</th>
                  <th>Total Revenue</th>
                  <th>Avg Revenue/Case</th>
                  <th>Avg Run Size</th>
                  <th>Ingr Cost/Case</th>
                  <th>Avg Setup Cost/Case</th>
                  <th>Run Cost/Case</th>
                  <th>COGS/Case</th>
                  <th>Profit/Case</th>
                  <th>Profit Margin</th>
               </tr>
            </thead>
            <tbody>
               <!-- https://vuejs.org/v2/guide/migration.html#Replacing-the-orderBy-Filter -->
               <!-- write an overall row before entering forloop -->
               <tr>
                  <!-- Write overall here -->
               </tr>
               <tr v-for="year in years">
                  <th>${year.year_number}</th>
                  <td>${year.revenue}</td>
                  <td>${year.revenue_per_case}</td>
                  <td>${year.avg_run_size}</td>
                  <td>${year.ingr_cost_per_case}</td>
                  <td>${year.avg_setup_cost}</td>
                  <td>${year.run_cost_per_case}</td>
                  <td>${year.cogs_per_case}</td>
                  <td>${year.profit_per_case}</td>
                  <td>${year.profit_margin}</td>
               </tr>
            </tbody>
         </table>
      </div>
<!--       <div id = "pagination" class="clearfix btn-group col-md-2 offset-md-5">
            <button type="button" class="btn btn-sm btn-outline-secondary" v-if="page != 1" @click="page--"> << </button>
            <button type="button" class="btn btn-sm btn-outline-secondary" v-for="pageNumber in pages.slice(page-1, page+5)" @click="page = pageNumber"> ${pageNumber} </button>
            <button type="button" class="btn btn-sm btn-outline-secondary" v-for="pageNumber in pages " @click="page = pageNumber"> ${pageNumber} </button>
            <button type="button" @click="page++" v-if="page < pages.length" class="btn btn-sm btn-outline-secondary"> >> </button>
          </div> -->
   </div>
   <div class="loading" v-if="loading===true">Loading&#8230;</div>
   <div class="modal fade" id="updatePLModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
                  <div class="modal-content">
                        <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLongTitle">Product Lines</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                              </button>
                        </div>
                        <form v-on:submit.prevent="updateProductLines()">
                              <div class="modal-body">
                                    <table class="table">
                                          <thead>
                                                <tr>
                                                      <th></th>
                                                      <th>Product Lines</th>
                                                </tr>
                                          </thead>
                                          <tbody>
                                                <tr v-for="pl in product_lines">
                                                      <td>
                                                            <input type="checkbox" v-model='pl.all_active'
                                                                  v-on:click="pl_checkbox_click($event, pl)">
                                                      </td>
                                                      <td>${pl.product_line_name}</td>
                                                </tr>
                                          </tbody>
                                    </table>
                              </div>
                              <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-primary">Save changes</button>
                              </div>
                        </form>
                  </div>
            </div>
            <div class="loading" v-if="loading===true">Loading&#8230;</div>
      </div>
</div>
<!-- <! — bootrtap js files → -->
<script src="../static/js/sales_report.js"></script>
{% endblock %}